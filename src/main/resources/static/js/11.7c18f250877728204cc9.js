webpackJsonp([11],{rbqR:function(e,t){},"wK+E":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("mvHQ"),s=n.n(o),a=n("XSTL"),r=n("1w/Q"),c=n("RtM3"),i={data:function(){return{currentPage:1,newsList:"",allPage:"",newsCont:[],userId:"",token:""}},components:{top:a.a,bottom:r.a},created:function(){var e=this.$cookies.get("userInfo");this.userInfo=e,console.log("user"+s()(e))},mounted:function(){console.log(this.$router.app._route.name),this.getNews(),window.addEventListener("scroll",this.scrollToTop)},destroyed:function(){window.removeEventListener("scroll",this.scrollToTop)},methods:{toDetail:function(e){this.$router.push({path:"newsDetail",query:{newsId:e.id}})},handleSizeChange:function(e){console.log(e),this.currentPage=e},handleCurrentChange:function(e){console.log(e),this.currentPage=e;var t=this,n=setInterval(function(){Math.floor(-t.scrollTop/10);document.documentElement.scrollTop=document.body.scrollTop=600,600===t.scrollTop&&clearInterval(n)},16)},scrollToTop:function(){var e=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop+600;this.scrollTop=e},getNews:function(){var e=this,t=s()({page:this.currentPage});Object(c.v)(t).then(function(t){console.log(t),"001008"==t.code?alert("无数据"):(e.newsList=t.data,e.allPage=t.data.count,t.data.news.forEach(function(t){e.newsCont.push(t.newsText.match(/<p\/?.+?\/p>/g).join("").replace(/<img\/?.+?>/g,"").replace(/<\/?.+?>/g,""))}))})}},watch:{currentPage:function(){this.getNews()}}},l={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("top"),e._v(" "),n("div",{staticClass:"news-push"}),e._v(" "),e._l(e.newsList.news,function(t,o){return n("div",{key:o,staticClass:"news-list"},[n("div",{staticClass:"news-title",on:{click:function(n){e.toDetail(t)}}},[e._v(e._s(t.newsTitle))]),e._v(" "),n("div",{staticClass:"news-content"},[n("img",{staticClass:"news-img",attrs:{src:t.newsImg,alt:""}}),e._v(" "),n("div",{staticClass:"news-cont",domProps:{innerHTML:e._s(e.newsCont[o+10*(e.currentPage-1)])}},[e._v("\n        "+e._s(e.newsCont[o])+"\n      ")])])])}),e._v(" "),e.allPage?n("div",{staticClass:"paging"},[n("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":1,"pager-count":5,layout:"prev, pager, next",total:e.allPage},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t}}})],1):e._e(),e._v(" "),n("bottom")],2)},staticRenderFns:[]};var u=n("VU/8")(i,l,!1,function(e){n("rbqR")},"data-v-b4d68ed0",null);t.default=u.exports}});
//# sourceMappingURL=11.7c18f250877728204cc9.js.map