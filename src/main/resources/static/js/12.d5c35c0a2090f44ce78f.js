webpackJsonp([12],{J6Pg:function(e,t){},ono8:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("mvHQ"),o=n.n(s),a=n("XSTL"),c=n("1w/Q"),r=n("RtM3"),l={data:function(){return{currentPage:1,newsList:"",allPage:"",newsCont:[]}},components:{top:a.a,bottom:c.a},mounted:function(){this.getNews(),window.addEventListener("scroll",this.scrollToTop)},methods:{toDetail:function(e){console.log(e),this.$router.push({path:"newsDetail",query:{newsId:e.id}})},handleSizeChange:function(e){console.log(e),this.currentPage=e},handleCurrentChange:function(e){console.log(e),this.currentPage=e;var t=this,n=setInterval(function(){Math.floor(-t.scrollTop/10);document.documentElement.scrollTop=document.body.scrollTop=600,600===t.scrollTop&&clearInterval(n)},16)},scrollToTop:function(){var e=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop+600;this.scrollTop=e},getNews:function(){var e=this,t=o()({page:this.currentPage});Object(r.w)(t).then(function(t){console.log(t,"data"),"001008"==t.code?alert("无数据"):(e.newsList=t.data,e.allPage=t.data.count,t.data.news.forEach(function(t){e.newsCont.push(t.newsText.match(/<p\/?.+?\/p>/g).join("").replace(/<img\/?.+?>/g,"").replace(/<\/?.+?>/g,""))}))})}},watch:{currentPage:function(){this.getNews()}}},i={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("top"),e._v(" "),e._m(0),e._v(" "),e._l(e.newsList.news,function(t,s){return n("div",{key:s,staticClass:"news-list",on:{click:function(n){e.toDetail(t)}}},[n("div",{staticClass:"news-title"},[e._v(e._s(t.newsTitle))]),e._v(" "),n("div",{staticClass:"news-content"},[n("img",{staticClass:"news-img",attrs:{src:t.newsImg,alt:""}}),e._v(" "),n("div",{staticClass:"news-cont",domProps:{innerHTML:e._s(e.newsCont[s+10*(e.currentPage-1)])}},[e._v(e._s(e.newsCont[s]))])])])}),e._v(" "),e.allPage?n("div",{staticClass:"paging"},[n("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":1,"pager-count":5,layout:"prev, pager, next",total:e.allPage},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t}}})],1):e._e(),e._v(" "),n("bottom")],2)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"news-push"},[t("p",[this._v("新闻推送")])])}]};var u=n("VU/8")(l,i,!1,function(e){n("J6Pg")},"data-v-a786e16c",null);t.default=u.exports}});
//# sourceMappingURL=12.d5c35c0a2090f44ce78f.js.map